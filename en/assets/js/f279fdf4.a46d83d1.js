"use strict";(self.webpackChunkvyte_merge_docs=self.webpackChunkvyte_merge_docs||[]).push([[9843],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var s=i(96540);const l={},r=s.createContext(l);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},63007:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"core-domain/bounded-contexts/Communication/notifications/templates","title":"Templates","description":"Plantillas versionadas para notificaciones y reminders - variables, snapshot y buenas pr\xe1cticas.","source":"@site/docs/00-core-domain/04-bounded-contexts/05.Communication/02.notifications/03.templates.md","sourceDirName":"00-core-domain/04-bounded-contexts/05.Communication/02.notifications","slug":"/core-domain/bounded-contexts/Communication/notifications/templates","permalink":"/vm-docs-public/en/docs/core-domain/bounded-contexts/Communication/notifications/templates","draft":false,"unlisted":false,"editUrl":"https://github.com/vytehub/vm-docs/tree/main/docs/00-core-domain/04-bounded-contexts/05.Communication/02.notifications/03.templates.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Templates","description":"Plantillas versionadas para notificaciones y reminders - variables, snapshot y buenas pr\xe1cticas."},"sidebar":"tutorialSidebar","previous":{"title":"Reminders","permalink":"/vm-docs-public/en/docs/core-domain/bounded-contexts/Communication/notifications/reminders"},"next":{"title":"Delivery & Tracking","permalink":"/vm-docs-public/en/docs/core-domain/bounded-contexts/Communication/notifications/delivery-tracking"}}');var l=i(74848),r=i(28453);const a={title:"Templates",description:"Plantillas versionadas para notificaciones y reminders - variables, snapshot y buenas pr\xe1cticas."},c="Templates",d={},t=[{value:"TL;DR",id:"tldr",level:2},{value:"1. Por qu\xe9 separar Templates de Reminders",id:"1-por-qu\xe9-separar-templates-de-reminders",level:2},{value:"2. Estructura conceptual (MVP)",id:"2-estructura-conceptual-mvp",level:2},{value:"3. Variables permitidas (safe variables)",id:"3-variables-permitidas-safe-variables",level:2},{value:"Reglas",id:"reglas",level:3},{value:"Variables t\xedpicas",id:"variables-t\xedpicas",level:3},{value:"4) Snapshot y auditor\xeda (importante)",id:"4-snapshot-y-auditor\xeda-importante",level:2},{value:"5. UX sugerida (simple)",id:"5-ux-sugerida-simple",level:2},{value:"Checklist (MVP)",id:"checklist-mvp",level:2}];function o(e){const n={blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"templates",children:"Templates"})}),"\n",(0,l.jsx)(n.h2,{id:"tldr",children:"TL;DR"}),"\n",(0,l.jsxs)(n.p,{children:["Las ",(0,l.jsx)(n.strong,{children:"Templates"})," permiten estandarizar y personalizar mensajes por canal (Email/Push/SMS/WhatsApp) sin escribir texto manual en cada booking."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Se definen ",(0,l.jsx)(n.strong,{children:"a nivel Owner (Profile/Organization)"})," como defaults."]}),"\n",(0,l.jsxs)(n.li,{children:["Se pueden ",(0,l.jsx)(n.strong,{children:"overridear"})," a nivel Listing (opcional) y excepcionalmente a nivel Booking."]}),"\n",(0,l.jsxs)(n.li,{children:["Cada env\xedo guarda un ",(0,l.jsx)(n.strong,{children:"snapshot"})," del contenido final (auditor\xeda y soporte)."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"1-por-qu\xe9-separar-templates-de-reminders",children:"1. Por qu\xe9 separar Templates de Reminders"}),"\n",(0,l.jsxs)(n.p,{children:["Reminders define ",(0,l.jsx)(n.strong,{children:"cu\xe1ndo"})," y ",(0,l.jsx)(n.strong,{children:"por qu\xe9"})," se env\xeda algo.",(0,l.jsx)(n.br,{}),"\n","Templates define ",(0,l.jsx)(n.strong,{children:"qu\xe9 texto"})," se env\xeda."]}),"\n",(0,l.jsx)(n.p,{children:"Separarlo evita:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"l\xf3gica mezclada en bookings"}),"\n",(0,l.jsx)(n.li,{children:"mensajes inconsistentes"}),"\n",(0,l.jsx)(n.li,{children:"problemas de compliance (\u201cqu\xe9 texto se envi\xf3 realmente\u201d)"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"2-estructura-conceptual-mvp",children:"2. Estructura conceptual (MVP)"}),"\n",(0,l.jsx)(n.p,{children:"Una template tiene:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"TemplateId"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"OwnerProfileId"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Kind"})," (ReminderUpcoming, BookingConfirmed, BookingCancelled, etc.)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Channel"})," (Email/Push/SMS/WhatsApp)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Language"})," (es-AR, en-US, etc.) ",(0,l.jsx)(n.em,{children:"(opcional MVP)"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Subject"})," (solo Email)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Body"})," (texto con variables)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"IsActive"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Version"})," o ",(0,l.jsx)(n.code,{children:"UpdatedAtUtc"})]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"MVP: empezar con 2\u20133 kinds: UpcomingReminder + BookingCancelled + BookingRescheduled."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"3-variables-permitidas-safe-variables",children:"3. Variables permitidas (safe variables)"}),"\n",(0,l.jsx)(n.h3,{id:"reglas",children:"Reglas"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Las variables deben ser ",(0,l.jsx)(n.strong,{children:"whitelisted"})," (lista permitida)."]}),"\n",(0,l.jsxs)(n.li,{children:["El render debe ser ",(0,l.jsx)(n.strong,{children:"fail-safe"}),": si una variable no existe \u2192 reemplazo vac\xedo o fallback (sin romper el env\xedo)."]}),"\n",(0,l.jsxs)(n.li,{children:["Respetar ",(0,l.jsx)(n.strong,{children:"Access/VisibilityMode"}),": si el destinatario no puede ver un dato, no se renderiza."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"variables-t\xedpicas",children:"Variables t\xedpicas"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{clientName}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{ownerName}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{listingTitle}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{serviceName}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{date}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{time}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{location}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{actions.confirmUrl}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{actions.rescheduleUrl}"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"{actions.cancelUrl}"})}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Evitar variables \u201csensibles\u201d por default (ej: notes internas, diagn\xf3sticos, etc.)."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"4-snapshot-y-auditor\xeda-importante",children:"4) Snapshot y auditor\xeda (importante)"}),"\n",(0,l.jsx)(n.p,{children:"Cuando se env\xeda una notificaci\xf3n, se guarda:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TemplateId"})," + ",(0,l.jsx)(n.code,{children:"TemplateVersion"})," (o ",(0,l.jsx)(n.code,{children:"UpdatedAt"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RenderedSubject"})," y/o ",(0,l.jsx)(n.code,{children:"RenderedBody"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"RecipientId"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"Channel"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"SentAtUtc"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ProviderMessageId"})," ",(0,l.jsx)(n.em,{children:"(si existe)"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Esto permite:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"soporte (\u201cqu\xe9 se envi\xf3\u201d)"}),"\n",(0,l.jsx)(n.li,{children:"auditor\xeda legal/comercial"}),"\n",(0,l.jsx)(n.li,{children:"debugging"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"5-ux-sugerida-simple",children:"5. UX sugerida (simple)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Pantalla \u201cMensajes\u201d:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"tabs por canal (Email/Push/SMS/WhatsApp)"}),"\n",(0,l.jsx)(n.li,{children:"selector de tipo (Reminder, Cancelaci\xf3n, Reprogramaci\xf3n)"}),"\n",(0,l.jsx)(n.li,{children:"editor con chips de variables"}),"\n",(0,l.jsx)(n.li,{children:"preview"}),"\n",(0,l.jsx)(n.li,{children:"bot\xf3n \u201cRestaurar default\u201d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"checklist-mvp",children:"Checklist (MVP)"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Definir kinds soportados"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Whitelist de variables"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Preview (render con datos ejemplo)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Snapshot por env\xedo"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Respeto de Access/VisibilityMode"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);