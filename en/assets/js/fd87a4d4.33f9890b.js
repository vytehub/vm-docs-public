"use strict";(self.webpackChunkvyte_merge_docs=self.webpackChunkvyte_merge_docs||[]).push([[6721],{1544:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"general/Arquitectura_Tecnica","title":"Arquitectura T\xe9cnica","description":"1) Contexto & Objetivo","source":"@site/docs/general/Arquitectura_Tecnica.md","sourceDirName":"general","slug":"/general/Arquitectura_Tecnica","permalink":"/vm-docs-public/en/docs/general/Arquitectura_Tecnica","draft":false,"unlisted":false,"editUrl":"https://github.com/vytehub/vm-docs/tree/main/docs/general/Arquitectura_Tecnica.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"General","permalink":"/vm-docs-public/en/docs/category/general"},"next":{"title":"Roadmap MVP (Web)","permalink":"/vm-docs-public/en/docs/general/Roadmap"}}');var r=s(4848),l=s(8453);const d={},o="Arquitectura T\xe9cnica",c={},t=[{value:"1) Contexto &amp; Objetivo",id:"1-contexto--objetivo",level:2},{value:"2) Alcance (In/Out)",id:"2-alcance-inout",level:2},{value:"3) Requisitos",id:"3-requisitos",level:2},{value:"4) Arquitectura (overview)",id:"4-arquitectura-overview",level:2},{value:"5) Proyectos / Repos",id:"5-proyectos--repos",level:2},{value:"6) Tecnolog\xedas (seg\xfan cuestionario)",id:"6-tecnolog\xedas-seg\xfan-cuestionario",level:2},{value:"7) IR Service (IA + Search)",id:"7-ir-service-ia--search",level:2},{value:"8) Data Model (MVP)",id:"8-data-model-mvp",level:2},{value:"9) API (extracto MVP)",id:"9-api-extracto-mvp",level:2},{value:"10) Seguridad &amp; Privacidad",id:"10-seguridad--privacidad",level:2},{value:"11) Observabilidad",id:"11-observabilidad",level:2},{value:"12) Despliegue &amp; Entornos",id:"12-despliegue--entornos",level:2},{value:"13) SLOs &amp; KPIs",id:"13-slos--kpis",level:2},{value:"14) Plan de Evoluci\xf3n",id:"14-plan-de-evoluci\xf3n",level:2},{value:"15) ADRs (resumen)",id:"15-adrs-resumen",level:2},{value:"16) Riesgos &amp; Open Questions",id:"16-riesgos--open-questions",level:2},{value:"17) Test / Acceptance Criteria",id:"17-test--acceptance-criteria",level:2},{value:"18) Checklist / Next Steps",id:"18-checklist--next-steps",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",input:"input",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"arquitectura-t\xe9cnica",children:"Arquitectura T\xe9cnica"})}),"\n",(0,r.jsx)(n.h2,{id:"1-contexto--objetivo",children:"1) Contexto & Objetivo"}),"\n",(0,r.jsxs)(n.p,{children:["Definir la arquitectura para el MVP Web de ",(0,r.jsx)(n.strong,{children:"VyteMerge"}),", maximizando ",(0,r.jsx)(n.strong,{children:"time-to-market"})," con ",(0,r.jsx)(n.strong,{children:".NET 8 + Angular"})," y aislando desde el inicio el ",(0,r.jsx)(n.strong,{children:"servicio de IA + Search (IR)"})," para experimentar r\xe1pido en ",(0,r.jsx)(n.strong,{children:"Search/Feed"})," sin frenar el desarrollo del dominio."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Equipo: 1 Arquitecto de software, 1 dev Jr, 1 dise\xf1adora Jr."}),"\n",(0,r.jsxs)(n.li,{children:["Objetivo t\xe9cnico: ",(0,r.jsx)(n.strong,{children:"Modular Monolith + CQRS (MediatR)"})," (.NET) para dominio y ",(0,r.jsx)(n.strong,{children:"Servicio IR"})," separado para ",(0,r.jsx)(n.strong,{children:"b\xfasqueda y recomendaciones"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Objetivo de producto: publicar ",(0,r.jsx)(n.strong,{children:"Offering/Slot/Booking"}),", Social b\xe1sico (Profiles/Follows/Posts), Campaigns, ",(0,r.jsx)(n.strong,{children:"Search + Feed"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-alcance-inout",children:"2) Alcance (In/Out)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Incluye (MVP)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Web Angular (repos separados), design system (",(0,r.jsx)(n.code,{children:"vt-toolkit"}),", ",(0,r.jsx)(n.code,{children:"vt-shared"}),") con Storybook."]}),"\n",(0,r.jsxs)(n.li,{children:["Backend ",(0,r.jsx)(n.strong,{children:"Modular Monolith .NET 8 + CQRS (MediatR)"}),", ",(0,r.jsx)(n.strong,{children:"BFF Minimal APIs"}),", ",(0,r.jsx)(n.strong,{children:"gRPC"})," interno (donde aplique)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IR Service (IA + Search)"})," expuesto v\xeda ",(0,r.jsx)(n.code,{children:"/search"})," y ",(0,r.jsx)(n.code,{children:"/feed"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"PostgreSQL (core), Redis (cache), Blob Storage (archivos), Service Bus (eventos)."}),"\n",(0,r.jsx)(n.li,{children:"Autenticaci\xf3n JWT corto + refresh; niveles de privacidad (cuenta/timeline/slot)."}),"\n",(0,r.jsx)(n.li,{children:"Observabilidad: OpenTelemetry + App Insights."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fuera de alcance (Fase 2)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SSR/PWA, app mobile nativa, sync bidireccional con calendarios externos, escrow/hold en pagos, streaming avanzado (Event Hubs/Kafka)."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-requisitos",children:"3) Requisitos"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Funcionales"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Offerings, Slots, Bookings"}),"; ",(0,r.jsx)(n.strong,{children:"Profiles, Follows, Posts"}),"; ",(0,r.jsx)(n.strong,{children:"Campaigns"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search"})," con filtros (tiempo/geo/categor\xeda/visibilidad) y ",(0,r.jsx)(n.strong,{children:"Feed"})," personalizado."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"No funcionales (SLOs)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["API lecturas p95 \u2264 ",(0,r.jsx)(n.strong,{children:"300ms"}),"; escrituras cr\xedticas p95 \u2264 ",(0,r.jsx)(n.strong,{children:"600ms"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IR/Search"})," p95 \u2264 ",(0,r.jsx)(n.strong,{children:"300ms"}),"; ",(0,r.jsx)(n.strong,{children:"index freshness"})," < ",(0,r.jsx)(n.strong,{children:"10s"})," tras publicar/actualizar Slot."]}),"\n",(0,r.jsxs)(n.li,{children:["Disponibilidad objetivo MVP: ",(0,r.jsx)(n.strong,{children:"99.5%"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Seguridad: TLS 1.2+, secretos en Key Vault; logging/trazas E2E."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-arquitectura-overview",children:"4) Arquitectura (overview)"}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart TB\n  subgraph FE["Frontend Angular"]\n    FE1[Shell SPA]\n    FE2[Modules: Booking/Timeline, Social, Business/Campaigns]\n    FE3[vt-toolkit + vt-shared Storybook]\n  end\n \n  subgraph BFF["BFF .NET 8 - Minimal APIs"]\n    G1[/REST para Web/]\n  end\n\n  subgraph MONO["Modular Monolith .NET 8 - CQRS + MediatR + Outbox"]\n    M1[Auth & Accounts]\n    M2[Profiles]\n    M3[Offering & Slots]\n    M4[Booking]\n    M5[Social]\n    M6[Campaigns]\n    M7[Notifications Orchestrator]\n  end\n\n  subgraph IR["IR Service - IA + Search"]\n    S1[/GET /search/]\n    S2[/GET /feed/]\n    IDX[(Search Index: Propuesta Azure AI Search)]\n    VEC[(Vector Store: Propuesta AI Search Vectors)]\n    S1 --\x3e IDX\n    S2 --\x3e VEC\n  end\n\n  subgraph DATA["Datos"]\n    DB[(PostgreSQL)]\n    RED[(Redis Cache)]\n    BLOB[(Azure Blob Storage)]\n    BUS[(Azure Service Bus)]\n  end\n\n  FE --\x3e G1 --\x3e MONO\n  G1 --\x3e IR\n  MONO --- DB\n  MONO --- RED\n  MONO -. Outbox eventos .-> BUS\n  BUS -. se\xf1ales .-> IR'}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-proyectos--repos",children:"5) Proyectos / Repos"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Frontend (repos separados)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vyte-web-shell"})," (Angular SPA; rutas y auth)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vt-toolkit"})," (design system de componentes)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vt-shared"})," (utilidades/SDK, modelos, estilos compartidos)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Backend"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vytemerge-backend"})," (monolito modular .NET 8):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"BFF"})," (Minimal APIs) + m\xf3dulos dominio (Auth, Profiles, Offering&Slots, Booking, Social, Campaigns, Notifications)."]}),"\n",(0,r.jsxs)(n.li,{children:["Infra: ",(0,r.jsx)(n.strong,{children:"Outbox"}),", integraci\xf3n ",(0,r.jsx)(n.strong,{children:"Service Bus"}),", ",(0,r.jsx)(n.strong,{children:"Observabilidad"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vytemerge-ir-service"})," (IA + Search) \u2014 ",(0,r.jsx)(n.em,{children:"Propuesta por defecto"}),": ",(0,r.jsx)(n.strong,{children:"Python + FastAPI"})," (ver \xa77)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-tecnolog\xedas-seg\xfan-cuestionario",children:"6) Tecnolog\xedas (seg\xfan cuestionario)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Capa"}),(0,r.jsx)(n.th,{children:"Decisi\xf3n"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Frontend"}),(0,r.jsxs)(n.td,{children:["Angular (repos separados), ",(0,r.jsx)(n.code,{children:"vt-toolkit"})," + ",(0,r.jsx)(n.code,{children:"vt-shared"}),", Storybook; ",(0,r.jsx)(n.strong,{children:"sin SSR/PWA"})," en MVP; Tests: Karma/Jasmine + Cypress; i18n Angular"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"BFF / API"}),(0,r.jsxs)(n.td,{children:[".NET 8 Minimal APIs; versionado por media type ",(0,r.jsx)(n.code,{children:"application/vnd.vytemerge.v1+json"}),"; rate limiting"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Dominio"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Modular Monolith + CQRS (MediatR)"}),"; EF Core (writes) + Dapper (reads)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Comunicaci\xf3n interna"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"gRPC"})," (BFF\u2194Monolito y/o entre m\xf3dulos si aplica)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Datos"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL"})," (core), ",(0,r.jsx)(n.strong,{children:"Redis"})," (cache), ",(0,r.jsx)(n.strong,{children:"Blob Storage"})," (archivos)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mensajer\xeda"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Azure Service Bus"})," (colas/t\xf3picos)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Notificaciones"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"SendGrid"})," (email), ",(0,r.jsx)(n.strong,{children:"FCM"})," (push)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Pagos"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Mercado Pago"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cloud & Ops"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Azure"}),", ",(0,r.jsx)(n.strong,{children:"AKS"}),", ",(0,r.jsx)(n.strong,{children:"GitHub Actions"})," CI/CD, ",(0,r.jsx)(n.strong,{children:"Front Door"}),", ",(0,r.jsx)(n.strong,{children:"Key Vault"}),", ",(0,r.jsx)(n.strong,{children:"App Configuration (Feature Flags)"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Observabilidad"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"OpenTelemetry + Application Insights"})})]})]})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pendiente por elegir (Propuesta por defecto)"}),": \xa77 IR Service y \xa78 B\xfasqueda/Vectores."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-ir-service-ia--search",children:"7) IR Service (IA + Search)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Decisi\xf3n pendiente"}),": lenguaje/stack, motor de b\xfasqueda/vector, embeddings y ranking."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Propuesta por defecto (costo\u2011beneficio\u2011velocidad):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lenguaje"}),": ",(0,r.jsx)(n.strong,{children:"Python + FastAPI"})," (iteraci\xf3n ML r\xe1pida; skills existentes)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"B\xfasqueda"}),": ",(0,r.jsx)(n.strong,{children:"Azure AI Search"})," (BM25 + Semantic Ranker + ",(0,r.jsx)(n.strong,{children:"Vector"})," en el mismo servicio)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Embeddings"}),": ",(0,r.jsx)(n.strong,{children:"Azure OpenAI"})," (batch; no al vuelo) con ",(0,r.jsx)(n.strong,{children:"versionado"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ranking"}),": ",(0,r.jsx)(n.strong,{children:"h\xedbrido"})," (reglas + pesos) en MVP; luego ",(0,r.jsx)(n.strong,{children:"LightGBM/XGBoost"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Se\xf1ales"}),": Monolito \u2192 ",(0,r.jsx)(n.strong,{children:"Service Bus"})," \u2192 IR (views, clicks, bookings, follows)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SLOs"}),": p95 ",(0,r.jsx)(n.code,{children:"/search"})," \u2264 ",(0,r.jsx)(n.strong,{children:"300ms"}),"; ",(0,r.jsx)(n.strong,{children:"freshness"})," ",(0,r.jsx)(n.code,{children:"<10s"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Contratos frontera (BFF \u2192 IR)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'GET /search?q&when&near&category&cursor&limit&fields\nGET /feed?userId&near&timebox&cursor&limit&fields\nPOST /feedback { itemId, type: "impression|click|dismiss|save|book" }\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Provider Abstraction (para no perder control)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SearchProvider"})," dentro de IR para permitir reemplazar ",(0,r.jsx)(n.strong,{children:"AI Search"})," por ",(0,r.jsx)(n.strong,{children:"Elastic + pgvector"})," sin tocar FE/BFF."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"EmbeddingProvider"})," (Azure OpenAI u OSS)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Indexaci\xf3n & Se\xf1ales"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Indexador IR suscripto a eventos: ",(0,r.jsx)(n.code,{children:"slot_published|updated|booked|cancelled"}),", ",(0,r.jsx)(n.code,{children:"follow_created"}),", ",(0,r.jsx)(n.code,{children:"post_published"}),", ",(0,r.jsx)(n.code,{children:"card_clicked"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Embeddings"})," en batch por cambios sustanciales; ",(0,r.jsx)(n.strong,{children:"Redis"})," para features online (CTR reciente, afinidad social, popularidad)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-data-model-mvp",children:"8) Data Model (MVP)"}),"\n",(0,r.jsx)(n.mermaid,{value:'erDiagram\n  User ||--o{ Profile : "owns"\n  User ||--o{ Timeline : "owns"\n  Profile ||--o{ Post : "publishes"\n  User ||--o{ Follow : "follows"\n  Timeline ||--o{ Slot : "shows"\n  Offering ||--o{ Slot : "generates"\n  Slot ||--o{ Booking : "books"\n\n  User {\n    uuid id\n    text type\n    text accountPrivacy\n  }\n  Profile {\n    uuid id\n    uuid userId\n    text displayName\n    text bio\n    json externalLinks\n  }\n  Timeline {\n    uuid id\n    uuid ownerUserId\n    text visibility\n  }\n  Offering {\n    uuid id\n    uuid ownerUserId\n    text name\n    int durationMin\n    money price\n    text currency\n    json buffers\n    uuid locationId\n    uuid formId\n    text confirmationPolicy\n  }\n  Slot {\n    uuid id\n    uuid offeringId\n    uuid timelineId\n    timestamptz start\n    timestamptz end\n    int capacity\n    text visibility\n    text status\n  }\n  Booking {\n    uuid id\n    uuid slotId\n    uuid buyerUserId\n    text status\n    money priceAtBooking\n    json responses\n    uuid paymentId\n    timestamptz createdAt\n  }\n  Follow {\n    uuid followerId\n    uuid followeeId\n    text status\n    timestamptz createdAt\n  }\n  Post {\n    uuid id\n    uuid ownerUserId\n    uuid timelineId\n    uuid offeringId\n    text content\n    json mediaRefs\n    text visibility\n    timestamptz createdAt\n  }'}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-api-extracto-mvp",children:"9) API (extracto MVP)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Auth/Profiles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /auth/login"})," \u2022 ",(0,r.jsx)(n.code,{children:"POST /auth/signup"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /profiles/:id"})," \u2022 ",(0,r.jsx)(n.code,{children:"PATCH /profiles/:id"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Follow"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /follows"})," \u2022 ",(0,r.jsx)(n.code,{children:"PATCH /follows/:userId/(approve|remove|block)"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"GET /profiles/:id/(followers|following)"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Offerings/Slots"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /offerings"})," \u2022 ",(0,r.jsx)(n.code,{children:"PATCH /offerings/:id"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /slots/generate"})," (reglas \u2192 slots)"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"GET /slots?timelineId=&visibility=public"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Bookings"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"POST /bookings"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"PATCH /bookings/:id/(confirm|cancel)"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Posts/Campaigns"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /posts"})," \u2022 ",(0,r.jsx)(n.code,{children:"DELETE /posts/:id"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST /campaigns"})," \u2022 ",(0,r.jsx)(n.code,{children:"GET /campaigns?owner=..."})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Discovery / IR"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"GET /search?q&when&near&category&cursor&limit&fields"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"GET /feed?userId&near&timebox&cursor&limit&fields"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Versionado"}),": header ",(0,r.jsx)(n.code,{children:"Accept: application/vnd.vytemerge.v1+json"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"10-seguridad--privacidad",children:"10) Seguridad & Privacidad"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auth"}),": JWT corto + refresh; scopes/roles."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Privacidad"}),": cuenta/timeline/slot; filtros de visibilidad en IR/Search."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cifrado"}),": TLS 1.2+; secretos en ",(0,r.jsx)(n.strong,{children:"Key Vault"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PII"}),": m\xednimo necesario; logs sin datos sensibles; retention acorde."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"11-observabilidad",children:"11) Observabilidad"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Trazas"}),": OpenTelemetry (traceId de FE\u2192BFF\u2192Monolito/IR\u2192AI Search)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"M\xe9tricas"}),": p95 ",(0,r.jsx)(n.code,{children:"/search"}),", ",(0,r.jsx)(n.code,{children:"/feed"}),"; tasa de error; colas atrasadas."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Logs"}),": Serilog/estructura; App Insights con sampling (10\u201320% en MVP)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"12-despliegue--entornos",children:"12) Despliegue & Entornos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Azure"})," + ",(0,r.jsx)(n.strong,{children:"AKS"})," (MVP con 1\u20132 r\xe9plicas por servicio)."]}),"\n",(0,r.jsxs)(n.li,{children:["Entornos: ",(0,r.jsx)(n.code,{children:"dev"})," \u2022 ",(0,r.jsx)(n.code,{children:"staging"})," \u2022 ",(0,r.jsx)(n.code,{children:"prod"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Front Door"})," (CDN/WAF), dominios y TLS administrados."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI/CD"}),": GitHub Actions (build/test/lint \u2192 deploy por entorno; ",(0,r.jsx)(n.code,{children:"trunk-based"})," + feature flags)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"13-slos--kpis",children:"13) SLOs & KPIs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SLO"}),": ",(0,r.jsx)(n.code,{children:"/search"})," y ",(0,r.jsx)(n.code,{children:"/feed"})," p95 \u2264 300ms; freshness ",(0,r.jsx)(n.code,{children:"<10s"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"KPIs"}),": CTR feed, conversi\xf3n Slot\u2192Booking, utilizaci\xf3n timeline, aceptaci\xf3n follow, ROAS campa\xf1as."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"14-plan-de-evoluci\xf3n",children:"14) Plan de Evoluci\xf3n"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MVP"}),": ranking por reglas; embeddings batch; cache Redis; Service Bus b\xe1sico."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fase 1.5"}),": ranker ",(0,r.jsx)(n.strong,{children:"LightGBM/XGBoost"}),"; A/B simple; m\xe1s se\xf1ales (dwell/saves)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fase 2"}),": Event Hubs/Kafka; feature store ligero; SSR en p\xe1ginas p\xfablicas (opcional); mobile con ",(0,r.jsx)(n.strong,{children:"Angular + Capacitor"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"15-adrs-resumen",children:"15) ADRs (resumen)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ADR-001"}),": T\xe9rmino ",(0,r.jsx)(n.strong,{children:"Service \u2192 Offering"})," (global)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ADR-002"}),": ",(0,r.jsx)(n.strong,{children:"Monolito modular + BFF"})," con ",(0,r.jsx)(n.strong,{children:"IR Service"})," separado desde d\xeda 1."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ADR-003"}),": ",(0,r.jsx)(n.strong,{children:"PostgreSQL"})," como DB Core."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ADR-004 (Propuesta)"}),": ",(0,r.jsx)(n.strong,{children:"IR Python + AI Search (texto+vector) + Embeddings Azure OpenAI"}),"; ranking h\xedbrido; SLOs definidos."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"16-riesgos--open-questions",children:"16) Riesgos & Open Questions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"IR Stack"})," (Python vs .NET) y ",(0,r.jsx)(n.strong,{children:"motor de b\xfasqueda"})," (AI Search vs Elastic + pgvector) \u2192 ",(0,r.jsx)(n.strong,{children:"Propuesta"})," arriba."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Costo"})," AI Search/embeddings a escala \u2192 mitigado con embeddings batch + cache + escalado gradual de SKU."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"gRPC"})," interno con equipo chico \u2192 mantenerlo en BFF\u2194Monolito; evitar gRPC entre todos los m\xf3dulos al inicio."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Repos separados FE"})," \u2192 disciplina para compartir modelos/SDKs; opci\xf3n de generar SDK desde OpenAPI."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"17-test--acceptance-criteria",children:"17) Test / Acceptance Criteria"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GET /search"})," y ",(0,r.jsx)(n.code,{children:"GET /feed"})," cumplen p95 \u2264 300ms en staging con dataset MVP."]}),"\n",(0,r.jsxs)(n.li,{children:["Indexaci\xf3n < 10s tras ",(0,r.jsx)(n.code,{children:"slot_published"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Outbox + Service Bus con reintentos e idempotencia."}),"\n",(0,r.jsx)(n.li,{children:"Observabilidad con traceId E2E y dashboards b\xe1sicos."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build/Deploy"})," verde a ",(0,r.jsx)(n.code,{children:"dev"})," y ",(0,r.jsx)(n.code,{children:"staging"})," desde CI."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"18-checklist--next-steps",children:"18) Checklist / Next Steps"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Confirmar ",(0,r.jsx)(n.strong,{children:"IR stack"})," (aceptar Propuesta o ajustar)."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Definir ",(0,r.jsx)(n.strong,{children:"esquema de \xedndices"})," y ",(0,r.jsx)(n.strong,{children:"feature set"})," inicial en IR."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Escribir ",(0,r.jsx)(n.strong,{children:"OpenAPI"})," de ",(0,r.jsx)(n.code,{children:"/search"}),", ",(0,r.jsx)(n.code,{children:"/feed"}),", ",(0,r.jsx)(n.code,{children:"/feedback"}),"."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Implementar ",(0,r.jsx)(n.strong,{children:"Indexador"})," (Service Bus \u2192 IR \u2192 AI Search)."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Preparar ",(0,r.jsx)(n.strong,{children:"pipelines CI/CD"})," (BFF, Monolito, IR) y secretos en Key Vault."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Crear ",(0,r.jsx)(n.strong,{children:"\xe9pica Platform Setup"})," con IaC y provisi\xf3n de: AKS, AI Search, Redis, Key Vault, App Insights, Front Door."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function d(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);