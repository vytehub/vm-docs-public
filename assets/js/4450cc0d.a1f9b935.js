"use strict";(self.webpackChunkvyte_merge_docs=self.webpackChunkvyte_merge_docs||[]).push([[6718],{15020:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"core-domain/bounded-contexts/Communication/notifications/delivery-tracking","title":"Delivery & Tracking","description":"Estado de entrega, reintentos, idempotencia y m\xe9tricas b\xe1sicas de notificaciones/reminders.","source":"@site/docs/00-core-domain/04-bounded-contexts/05.Communication/02.notifications/04.delivery-tracking.md","sourceDirName":"00-core-domain/04-bounded-contexts/05.Communication/02.notifications","slug":"/core-domain/bounded-contexts/Communication/notifications/delivery-tracking","permalink":"/vm-docs-public/docs/core-domain/bounded-contexts/Communication/notifications/delivery-tracking","draft":false,"unlisted":false,"editUrl":"https://github.com/vytehub/vm-docs/tree/main/docs/00-core-domain/04-bounded-contexts/05.Communication/02.notifications/04.delivery-tracking.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Delivery & Tracking","description":"Estado de entrega, reintentos, idempotencia y m\xe9tricas b\xe1sicas de notificaciones/reminders."},"sidebar":"tutorialSidebar","previous":{"title":"Templates","permalink":"/vm-docs-public/docs/core-domain/bounded-contexts/Communication/notifications/templates"},"next":{"title":"Mdulos/features de negocio a revisar (pendientes)","permalink":"/vm-docs-public/docs/core-domain/bounded-contexts/Modulos pendientes de revisar/"}}');var c=i(74848),o=i(28453);const d={title:"Delivery & Tracking",description:"Estado de entrega, reintentos, idempotencia y m\xe9tricas b\xe1sicas de notificaciones/reminders."},r="Delivery & Tracking",l={},t=[{value:"TL;DR",id:"tldr",level:2},{value:"1) Estados recomendados",id:"1-estados-recomendados",level:2},{value:"M\xednimo (MVP)",id:"m\xednimo-mvp",level:3},{value:"Avanzado (cuando el proveedor lo soporte)",id:"avanzado-cuando-el-proveedor-lo-soporte",level:3},{value:"2) Idempotencia (anti duplicados)",id:"2-idempotencia-anti-duplicados",level:2},{value:"3) Reintentos",id:"3-reintentos",level:2},{value:"4) Tracking de acciones",id:"4-tracking-de-acciones",level:2},{value:"5) M\xe9tricas b\xe1sicas (producto/operaci\xf3n)",id:"5-m\xe9tricas-b\xe1sicas-productooperaci\xf3n",level:2},{value:"Checklist (si lo implement\xe1s)",id:"checklist-si-lo-implement\xe1s",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"delivery--tracking",children:"Delivery & Tracking"})}),"\n",(0,c.jsx)(n.h2,{id:"tldr",children:"TL;DR"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Delivery & Tracking"})," registra qu\xe9 pas\xf3 con cada notificaci\xf3n:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"si se program\xf3"}),"\n",(0,c.jsx)(n.li,{children:"si se envi\xf3"}),"\n",(0,c.jsx)(n.li,{children:"si fall\xf3"}),"\n",(0,c.jsx)(n.li,{children:"si el usuario actu\xf3 (confirm\xf3, reprogram\xf3, cancel\xf3)"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Esto es clave para:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"reducir no-shows (medir)"}),"\n",(0,c.jsx)(n.li,{children:"soporte (diagnosticar)"}),"\n",(0,c.jsx)(n.li,{children:"evitar env\xedos duplicados (idempotencia)"}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["Este documento es ",(0,c.jsx)(n.strong,{children:"opcional"})," para MVP, pero recomendado si vas a operar con SMS/WhatsApp o alto volumen."]}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"1-estados-recomendados",children:"1) Estados recomendados"}),"\n",(0,c.jsx)(n.h3,{id:"m\xednimo-mvp",children:"M\xednimo (MVP)"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"Scheduled"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"Sent"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"Failed"})}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"ActionTaken"})," (Confirm/Reschedule/Cancel)"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"avanzado-cuando-el-proveedor-lo-soporte",children:"Avanzado (cuando el proveedor lo soporte)"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"Delivered"})}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Bounced"})," (Email)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Opened"})," (Email/Push, si hay tracking)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Clicked"})," (si tracke\xe1s links)"]}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"RateLimited"})}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"2-idempotencia-anti-duplicados",children:"2) Idempotencia (anti duplicados)"}),"\n",(0,c.jsx)(n.p,{children:"Causa t\xedpica: reintentos, timeouts, jobs duplicados."}),"\n",(0,c.jsx)(n.p,{children:"Regla pr\xe1ctica:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Generar una clave idempotente por recordatorio:","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"BookingId + Trigger + Offset + Channel"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.li,{children:"Si ya existe un env\xedo con esa clave en estado Sent/Delivered \u2192 no re-enviar."}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"3-reintentos",children:"3) Reintentos"}),"\n",(0,c.jsxs)(n.p,{children:["Para ",(0,c.jsx)(n.code,{children:"Failed"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"reintentar N veces con backoff (ej: 1m, 5m, 30m)"}),"\n",(0,c.jsxs)(n.li,{children:["si excede \u2192 marcar ",(0,c.jsx)(n.code,{children:"FailedPermanent"})," (opcional) y fallback a otro canal (opcional)"]}),"\n"]}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"MVP: 1 reintento simple es suficiente."}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"4-tracking-de-acciones",children:"4) Tracking de acciones"}),"\n",(0,c.jsx)(n.p,{children:"Cuando el usuario toca un link (Confirm/Reschedule/Cancel):"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["registrar ",(0,c.jsx)(n.code,{children:"ActionTaken"})]}),"\n",(0,c.jsxs)(n.li,{children:["almacenar ",(0,c.jsx)(n.code,{children:"ActionType"}),", ",(0,c.jsx)(n.code,{children:"ActionAtUtc"})]}),"\n",(0,c.jsxs)(n.li,{children:["opcional: ",(0,c.jsx)(n.code,{children:"SourceChannel"})," (desde qu\xe9 reminder lo hizo)"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Esto te da insights como:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"qu\xe9 offset funciona mejor (24h vs 2h)"}),"\n",(0,c.jsx)(n.li,{children:"qu\xe9 canal convierte m\xe1s (Email vs Push)"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"5-m\xe9tricas-b\xe1sicas-productooperaci\xf3n",children:"5) M\xe9tricas b\xe1sicas (producto/operaci\xf3n)"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"% reminders sent vs failed"}),"\n",(0,c.jsx)(n.li,{children:"% acciones tomadas desde reminder"}),"\n",(0,c.jsx)(n.li,{children:"reducci\xf3n de no-shows por tipo de listing"}),"\n",(0,c.jsx)(n.li,{children:"latencia de env\xedo (Scheduled\u2192Sent)"}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"checklist-si-lo-implement\xe1s",children:"Checklist (si lo implement\xe1s)"}),"\n",(0,c.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,c.jsxs)(n.li,{className:"task-list-item",children:[(0,c.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Estados definidos y consistentes"]}),"\n",(0,c.jsxs)(n.li,{className:"task-list-item",children:[(0,c.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Idempotencia por reminder"]}),"\n",(0,c.jsxs)(n.li,{className:"task-list-item",children:[(0,c.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Reintentos m\xednimos"]}),"\n",(0,c.jsxs)(n.li,{className:"task-list-item",children:[(0,c.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Registro de acciones (confirm/reprogramar/cancelar)"]}),"\n",(0,c.jsxs)(n.li,{className:"task-list-item",children:[(0,c.jsx)(n.input,{type:"checkbox",disabled:!0})," ","M\xe9tricas de operaci\xf3n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>r});var s=i(96540);const c={},o=s.createContext(c);function d(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);