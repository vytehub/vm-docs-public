"use strict";(self.webpackChunkvyte_merge_docs=self.webpackChunkvyte_merge_docs||[]).push([[7471],{12803:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image-1-ffa34202c2c9fa7eb07170695f4c6344.png"},15581:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"architecture/system-architecture/overview","title":"VyteMerge \u2014 Arquitectura (simple y concisa)","description":"Objetivo","source":"@site/docs/03-architecture/system-architecture/overview.md","sourceDirName":"03-architecture/system-architecture","slug":"/architecture/system-architecture/overview","permalink":"/vm-docs-public/en/docs/architecture/system-architecture/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/vytehub/vm-docs/tree/main/docs/03-architecture/system-architecture/overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Architecture","permalink":"/vm-docs-public/en/docs/category/architecture"},"next":{"title":"Design & Tokens (Figma)","permalink":"/vm-docs-public/en/docs/category/design--tokens-figma"}}');var r=i(74848),o=i(28453);const l={},t="VyteMerge \u2014 Arquitectura (simple y concisa)",c={},a=[{value:"Objetivo",id:"objetivo",level:2},{value:"Stack (actual)",id:"stack-actual",level:2},{value:"1) Diagrama de sistema (alto nivel)",id:"1-diagrama-de-sistema-alto-nivel",level:2},{value:"2) M\xf3dulos (solo los necesarios para el flujo Listing \u2192 Slots \u2192 Booking)",id:"2-m\xf3dulos-solo-los-necesarios-para-el-flujo-listing--slots--booking",level:2},{value:"3) Modelo m\xednimo (relaciones clave)",id:"3-modelo-m\xednimo-relaciones-clave",level:2},{value:"4) Flujo principal (end-to-end) \u2014 Proveedor publica, cliente reserva",id:"4-flujo-principal-end-to-end--proveedor-publica-cliente-reserva",level:2},{value:"4.1 Proveedor: crear Service + Listing + SlotConfig y generar Slots",id:"41-proveedor-crear-service--listing--slotconfig-y-generar-slots",level:3},{value:"4.2 Cliente: ver disponibilidad y crear Booking",id:"42-cliente-ver-disponibilidad-y-crear-booking",level:3},{value:"5) Estados m\xednimos (para no complicar)",id:"5-estados-m\xednimos-para-no-complicar",level:2},{value:"6) Deployment (dev) \u2014 Docker Compose (conceptual)",id:"6-deployment-dev--docker-compose-conceptual",level:2},{value:"Checklist (para alinear c\xf3digo \u2194 doc)",id:"checklist-para-alinear-c\xf3digo--doc",level:2}];function d(e){const n={blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",input:"input",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"vytemerge--arquitectura-simple-y-concisa",children:"VyteMerge \u2014 Arquitectura (simple y concisa)"})}),"\n",(0,r.jsx)(n.h2,{id:"objetivo",children:"Objetivo"}),"\n",(0,r.jsxs)(n.p,{children:["Mostrar ",(0,r.jsx)(n.strong,{children:"c\xf3mo fluye el sistema"})," para \u201cvender\u201d un ",(0,r.jsx)(n.strong,{children:"Listing"})," (publicaci\xf3n) a trav\xe9s de ",(0,r.jsx)(n.strong,{children:"configurar y generar Slots"})," (disponibilidad) y convertirlos en ",(0,r.jsx)(n.strong,{children:"Bookings"})," (reservas)."]}),"\n",(0,r.jsx)(n.h2,{id:"stack-actual",children:"Stack (actual)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Frontend"}),": Angular + ",(0,r.jsx)(n.strong,{children:"Micro Frontends (Module Federation)"})," (Shell + MFEs)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Identity"}),": ",(0,r.jsx)(n.strong,{children:"Keycloak"})," (service) para AuthN/AuthZ"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backend"}),": .NET Core ",(0,r.jsx)(n.strong,{children:"Modular Monolith"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DB"}),": ",(0,r.jsx)(n.strong,{children:"PostgreSQL"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Infra dev"}),": Docker / Docker Compose"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-diagrama-de-sistema-alto-nivel",children:"1) Diagrama de sistema (alto nivel)"}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart LR\n  U[Usuario / Cliente] --\x3e FE[Angular Shell + MFEs]\n  P[Proveedor / Negocio] --\x3e FE\n\n  FE --\x3e|OIDC/OAuth2| KC[Keycloak]\n\n  FE --\x3e|REST/JSON| API[.NET Modular Monolith]\n  API --\x3e PG[(PostgreSQL)]\n\n  subgraph Docker[Docker Compose]\n    KC\n    API\n    PG\n  end"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-m\xf3dulos-solo-los-necesarios-para-el-flujo-listing--slots--booking",children:"2) M\xf3dulos (solo los necesarios para el flujo Listing \u2192 Slots \u2192 Booking)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"M\xf3dulo (backend)"}),(0,r.jsx)(n.th,{children:"Responsabilidad"}),(0,r.jsx)(n.th,{children:"Entidades clave"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Identity (Keycloak)"}),(0,r.jsx)(n.td,{children:"Login, tokens, roles/claims"}),(0,r.jsx)(n.td,{children:"Realm, Client, User, Role"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Profiles"}),(0,r.jsx)(n.td,{children:"Identidad de negocio (proveedor/cliente)"}),(0,r.jsx)(n.td,{children:"Profile"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Offer (Catalog & Listings)"}),(0,r.jsx)(n.td,{children:"Crear y publicar oferta"}),(0,r.jsx)(n.td,{children:"Service, Listing, Form (opcional)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Supply (Time & Place)"}),(0,r.jsx)(n.td,{children:"Disponibilidad y reglas de generaci\xf3n"}),(0,r.jsx)(n.td,{children:"Timeline, Slot, SlotConfig, Place (opcional)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Booking"}),(0,r.jsx)(n.td,{children:"Reservas sobre slots"}),(0,r.jsx)(n.td,{children:"Booking (y estados)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Communication (opcional)"}),(0,r.jsx)(n.td,{children:"Notificaciones (confirmaciones)"}),(0,r.jsx)(n.td,{children:"Notification"})]})]})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Nota: si hoy Booking vive dentro de Supply en tu monolito, pod\xe9s dejarlo como subm\xf3dulo; la separaci\xf3n aqu\xed es ",(0,r.jsx)(n.strong,{children:"conceptual"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-modelo-m\xednimo-relaciones-clave",children:"3) Modelo m\xednimo (relaciones clave)"}),"\n",(0,r.jsx)(n.mermaid,{value:"erDiagram\n  PROFILE ||--o{ LISTING : offers\n  LISTING ||--|| SERVICE : describes\n  LISTING ||--o{ SLOT_CONFIG : defines\n  PROFILE ||--o{ TIMELINE : owns\n  TIMELINE ||--o{ SLOT : contains\n  SLOT_CONFIG ||--o{ SLOT : generates\n  SLOT ||--o{ BOOKING : converts"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Lectura"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Un ",(0,r.jsx)(n.strong,{children:"Listing"})," representa \u201clo que vend\xe9s\u201d (Service + reglas)."]}),"\n",(0,r.jsxs)(n.li,{children:["Un ",(0,r.jsx)(n.strong,{children:"SlotConfig"})," define \u201cc\xf3mo genero slots\u201d (duraci\xf3n, d\xedas, buffers, reglas)."]}),"\n",(0,r.jsxs)(n.li,{children:["El ",(0,r.jsx)(n.strong,{children:"Timeline"})," es la fuente de verdad del tiempo del proveedor."]}),"\n",(0,r.jsxs)(n.li,{children:["Los ",(0,r.jsx)(n.strong,{children:"Slots"})," se generan/registran en un Timeline y luego se convierten en ",(0,r.jsx)(n.strong,{children:"Bookings"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-flujo-principal-end-to-end--proveedor-publica-cliente-reserva",children:"4) Flujo principal (end-to-end) \u2014 Proveedor publica, cliente reserva"}),"\n",(0,r.jsx)(n.h3,{id:"41-proveedor-crear-service--listing--slotconfig-y-generar-slots",children:"4.1 Proveedor: crear Service + Listing + SlotConfig y generar Slots"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"alt text",src:i(26777).A+"",width:"4725",height:"3405"})}),"\n",(0,r.jsx)(n.h3,{id:"42-cliente-ver-disponibilidad-y-crear-booking",children:"4.2 Cliente: ver disponibilidad y crear Booking"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"alt text",src:i(12803).A+"",width:"4625",height:"2445"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-estados-m\xednimos-para-no-complicar",children:"5) Estados m\xednimos (para no complicar)"}),"\n",(0,r.jsx)(n.mermaid,{value:"stateDiagram-v2\n  [*] --\x3e Pending\n  Pending --\x3e Confirmed\n  Pending --\x3e Cancelled\n  Confirmed --\x3e Completed\n  Confirmed --\x3e Cancelled\n  Cancelled --\x3e [*]\n  Completed --\x3e [*]"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-deployment-dev--docker-compose-conceptual",children:"6) Deployment (dev) \u2014 Docker Compose (conceptual)"}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart TB\n  subgraph DockerCompose[Docker Compose]\n    KC[Keycloak]\n    API[.NET Modular Monolith API]\n    PG[(PostgreSQL)]\n  end\n\n  FE[Angular Shell + MFEs] --\x3e|OIDC| KC\n  FE --\x3e|REST| API\n  API --\x3e PG"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"checklist-para-alinear-c\xf3digo--doc",children:"Checklist (para alinear c\xf3digo \u2194 doc)"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Confirmar d\xf3nde vive ",(0,r.jsx)(n.strong,{children:"SlotConfig"})," (Offer vs Supply) y mantener 1 solo owner."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Definir 1 endpoint/command \u201c",(0,r.jsx)(n.strong,{children:"GenerateSlots"}),"\u201d con inputs claros (dateRange + rules)."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Definir \u201c",(0,r.jsx)(n.strong,{children:"QueryAvailability"}),"\u201d como lectura optimizada (listingId + rango)."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Definir transici\xf3n de estados de Booking (m\xednimo: Pending/Confirmed/Cancelled/Completed)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},26777:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/image-a92a8ba6f150b854de51f090ec19114f.png"},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(96540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);