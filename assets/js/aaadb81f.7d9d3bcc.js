"use strict";(self.webpackChunkvyte_merge_docs=self.webpackChunkvyte_merge_docs||[]).push([[7781],{28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>c});var s=n(96540);const l={},r=s.createContext(l);function o(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(r.Provider,{value:i},e.children)}},77356:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"domain-behavior/core-flows/publish-listing","title":"Flow 01 - Publicar Listing y habilitar Slots","description":"Desde un Business crea/pulsa un Listing, configura Timeline y el sistema proyecta Slots para booking.","source":"@site/docs/01-domain-behavior/01-core-flows/01-publish-listing.md","sourceDirName":"01-domain-behavior/01-core-flows","slug":"/domain-behavior/core-flows/publish-listing","permalink":"/vm-docs-public/docs/domain-behavior/core-flows/publish-listing","draft":false,"unlisted":false,"editUrl":"https://github.com/vytehub/vm-docs/tree/main/docs/01-domain-behavior/01-core-flows/01-publish-listing.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Flow 01 - Publicar Listing y habilitar Slots","description":"Desde un Business crea/pulsa un Listing, configura Timeline y el sistema proyecta Slots para booking."},"sidebar":"tutorialSidebar","previous":{"title":"Notaci\xf3n & Plantillas","permalink":"/vm-docs-public/docs/domain-behavior/notation"},"next":{"title":"Flow 02 - Abrir Listing y crear Booking","permalink":"/vm-docs-public/docs/domain-behavior/core-flows/open-and-book"}}');var l=n(74848),r=n(28453);const o={title:"Flow 01 - Publicar Listing y habilitar Slots",description:"Desde un Business crea/pulsa un Listing, configura Timeline y el sistema proyecta Slots para booking."},c="Flow 01 \u2014 Publicar Listing y habilitar Slots",d={},t=[{value:"Resumen",id:"resumen",level:2},{value:"Preconditions",id:"preconditions",level:2},{value:"Main Flow (paso a paso)",id:"main-flow-paso-a-paso",level:2},{value:"Domain Trace (Command \u2192 Aggregate \u2192 Event)",id:"domain-trace-command--aggregate--event",level:2},{value:"Edge Cases",id:"edge-cases",level:2},{value:"Links (fuente de verdad)",id:"links-fuente-de-verdad",level:2}];function a(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.header,{children:(0,l.jsx)(i.h1,{id:"flow-01--publicar-listing-y-habilitar-slots",children:"Flow 01 \u2014 Publicar Listing y habilitar Slots"})}),"\n",(0,l.jsx)(i.h2,{id:"resumen",children:"Resumen"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Goal:"})," que un negocio pueda publicar una oferta (Listing) y exponer disponibilidad proyectada (Slots) basada en su Timeline + reglas."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Actores:"})," Business (owner), Sistema VyteMerge."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Contextos:"})," Offer (Catalog/Listings), Supply (Timelines/Places), Governance (Access), Discovery (index), Communication (notifications opcional)."]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"preconditions",children:"Preconditions"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Business tiene Profile activo."}),"\n",(0,l.jsxs)(i.li,{children:["Existe (o se crea) un ",(0,l.jsx)(i.strong,{children:"Service/Product"})," en el Cat\xe1logo."]}),"\n",(0,l.jsxs)(i.li,{children:["Existe un ",(0,l.jsx)(i.strong,{children:"Place"})," asociado (con timezone) si el listing es presencial o si afecta c\xe1lculo."]}),"\n",(0,l.jsxs)(i.li,{children:["Business tiene un ",(0,l.jsx)(i.strong,{children:"Timeline"})," (propio o acordado v\xeda Agreements) donde aplica disponibilidad."]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"main-flow-paso-a-paso",children:"Main Flow (paso a paso)"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Business crea o selecciona un ",(0,l.jsx)(i.strong,{children:"Service/Product"})," (qu\xe9)."]}),"\n",(0,l.jsxs)(i.li,{children:["Business crea un ",(0,l.jsx)(i.strong,{children:"Listing"})," en estado ",(0,l.jsx)(i.strong,{children:"Draft"})," (c\xf3mo se vende/ofrece):","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"duraci\xf3n / precio / reglas de booking / capacidad"}),"\n",(0,l.jsx)(i.li,{children:"place / modalidad"}),"\n",(0,l.jsx)(i.li,{children:"visibility (public/unlisted/private)"}),"\n",(0,l.jsx)(i.li,{children:"form (intake) si aplica"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Business configura disponibilidad en su ",(0,l.jsx)(i.strong,{children:"Timeline"})," (cu\xe1ndo):","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"events existentes (bloqueos)"}),"\n",(0,l.jsx)(i.li,{children:"reglas de disponibilidad (si aplica)"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Sistema recalcula/proyecta ",(0,l.jsx)(i.strong,{children:"Slots"})," (disponibilidad derivada) para ese Listing:","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"aplica conflict rules del timeline"}),"\n",(0,l.jsx)(i.li,{children:"aplica reglas de capacity/assignment"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Business publica el Listing (",(0,l.jsx)(i.strong,{children:"Published"}),")."]}),"\n",(0,l.jsxs)(i.li,{children:["Sistema:","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"habilita el listing para surfaces (link, channels, discovery/feed seg\xfan reglas)"}),"\n",(0,l.jsx)(i.li,{children:"(si corresponde) indexa el listing en Search/Discovery."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"domain-trace-command--aggregate--event",children:"Domain Trace (Command \u2192 Aggregate \u2192 Event)"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Command:"})," ",(0,l.jsx)(i.code,{children:"CreateServiceOrProduct"})," (si no existe)","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Aggregate:"})," ",(0,l.jsx)(i.code,{children:"CatalogItem"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Events:"})," ",(0,l.jsx)(i.code,{children:"ServiceCreated"})," / ",(0,l.jsx)(i.code,{children:"ProductCreated"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Command:"})," ",(0,l.jsx)(i.code,{children:"CreateListing"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Aggregate:"})," ",(0,l.jsx)(i.code,{children:"Listing"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Events:"})," ",(0,l.jsx)(i.code,{children:"ListingCreated"})," (Draft)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Command:"})," ",(0,l.jsx)(i.code,{children:"ConfigureTimelineAvailability"})," (o ",(0,l.jsx)(i.code,{children:"UpsertEvents"}),"/",(0,l.jsx)(i.code,{children:"UpsertRules"}),")","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Aggregate:"})," ",(0,l.jsx)(i.code,{children:"Timeline"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Events:"})," ",(0,l.jsx)(i.code,{children:"TimelineUpdated"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Projection:"})," ",(0,l.jsx)(i.code,{children:"ProjectSlotsForListing"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Inputs:"})," Timeline + Listing rules + Place timezone"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Outputs:"})," ",(0,l.jsx)(i.code,{children:"SlotsProjected"})," (o actualizaci\xf3n de read model de slots)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Command:"})," ",(0,l.jsx)(i.code,{children:"PublishListing"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Aggregate:"})," ",(0,l.jsx)(i.code,{children:"Listing"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Invariants:"})," listing v\xe1lido; reglas m\xednimas completas; permisos ok."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Events:"})," ",(0,l.jsx)(i.code,{children:"ListingPublished"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Projections:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"DiscoveryIndexUpdated"})}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"FeedEligibilityUpdated"})," (si aplica)"]}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"Link/ChannelVisibilityUpdated"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"edge-cases",children:"Edge Cases"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Timeline con conflictos: slots se recortan o se marcan como no disponibles."}),"\n",(0,l.jsx)(i.li,{children:"Timezone: c\xe1lculos de slots deben usar el timezone del Place/Timeline (no \u201cUTC a ojo\u201d)."}),"\n",(0,l.jsxs)(i.li,{children:["Listing Published pero sin slots: permitido (para \u201con request\u201d) o bloqueado (decisi\xf3n de producto). ",(0,l.jsx)(i.strong,{children:"NEEDS CLARIFICATION"}),"."]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"links-fuente-de-verdad",children:"Links (fuente de verdad)"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"/vm-docs-public/docs/core-domain/core-model/core-model",children:"Core Model"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"/vm-docs-public/docs/core-domain/bounded-contexts/Offer%20-%20Catalog%20&%20Listings/listing/overview",children:"Listing Overview/Rules/Lifecycle"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"/vm-docs-public/docs/core-domain/bounded-contexts/Offer%20-%20Catalog%20&%20Listings/listing/status_lifecycle",children:"Listing Status & Lifecycle"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"/vm-docs-public/docs/core-domain/bounded-contexts/Supply%20-%20Time%20&%20Place/timelines/timeline_conflict_rules",children:"Timeline + conflict rules"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"/vm-docs-public/docs/core-domain/bounded-contexts/Supply%20-%20Time%20&%20Place/places/timezone",children:"Place + timezone"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);